{% load wagtailadmin_tags custom_code_editor_helper %}
<div data-custom-code-editor-target="container" data-id="{{ widget.attrs.id }}" class="editor-container editor-{{ widget.attrs.id }}" {% for k, v in widget.attrs.items %}{{k}}="{{v}}"{% endfor %}>
  {% if widget.enable_modes %}
  <div class="dropdown">
    <button class="button-dropdown result">{% icon name="arrow-down" classname="icon-ace" title="Modes" %}<span class="text-mode"></span></button>
    <div class="dropdown-content" style="display: none;">
      <input type="text" placeholder="Search..." class="my-input mode-search search-bar">
      <ul>
        {% for mode in widget.modes %}
          <li class="modes-lists" {% if mode.title %}data-title="{{ mode.title }}"{% endif %} data-name="{{ mode.name | lower }}">{% if mode.title %}{{ mode.title }}{% else %}{{ mode.name | title }}{% endif %}</li>
        {% endfor %}
      </ul>
    </div>
  </div>
  {% endif %}
  {% if widget.label %}
    <label for="{{ widget.attrs.id }}"><strong>{{widget.label}}:</strong></label>
  {% endif %}
  <textarea id="{{ widget.attrs.id }}" style="width:{{ widget.width }};height:{{ widget.height }};" name="{{ widget.name }}"
    {% if widget.required %}required=""{% endif %}>{{ widget.value }}</textarea>
  <div class="code-snippet-wrapper editor" id="{{ widget.attrs.id }}-wrapper"></div>
  {% if widget.enable_modes %}
  <div class="switch-container">
      <button class="switch">{% icon name="lock" classname="lock-ace" title="Lock Editor" %}<b>Read Only Mode - </b> Unlock it by clicking this button</button>
  </div>
  {% endif %}
  {% if widget.enable_options %}
  <div class="options-config">
    <button class="button-options" title="Adjust Options">
      {% icon name="cog" classname="icon-ace" title="Adjust Options" %}
    </button>
    <div class="options-container" style="display:none;">
      <div class="options-inner">
        <div class="search-area">
            <input type="text" class="search-bar my-options" placeholder="Search...">
        </div>
        <div class="button-container">
          <button class="copy-options" title="Copy All Changes Options">{% icon name="copy" classname="icon-ace" title="Copy Options" %}</button>
          <button class="undo-options" title="Undo">{% icon name="history" classname="icon-ace" title="Undo Options" %}</button>
          <span class="changes-copy" style="display:none;"></span>
        </div>
        <div class="line-category"></div>
        <ul>
          {# Options List Here #}
          {% generate_options_lists widget.options %}
        </ul>
      </div>
    </div>
  </div>
  {% endif %}
</div>
{% if widget.django_admin %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        new CustomCodeEditor(document.querySelector('div.editor-{{ widget.attrs.id }}'));
    })
</script>
{% endif %}